{"version":3,"file":"static/js/main.fae2b348.js","mappings":"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","sources":["webpack://2048-game/./src/animframe_polyfill.js","webpack://2048-game/./src/application.js","webpack://2048-game/./src/bind_polyfill.js","webpack://2048-game/./src/classlist_polyfill.js","webpack://2048-game/./src/game_manager.js","webpack://2048-game/./src/grid.js","webpack://2048-game/./src/html_actuator.js","webpack://2048-game/./src/index.js","webpack://2048-game/./src/keyboard_input_manager.js","webpack://2048-game/./src/local_storage_manager.js","webpack://2048-game/./src/tile.js"],"sourcesContent":["(function () {\n  var lastTime = 0;\n  var vendors = ['webkit', 'moz'];\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n      window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function (callback) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function () {\n        callback(currTime + timeToCall);\n      },\n      timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function (id) {\n      clearTimeout(id);\n    };\n  }\n}());\n","// Wait till the browser is ready to render the game (avoids glitches)\nwindow.requestAnimationFrame(function () {\n  new GameManager(4, KeyboardInputManager, HTMLActuator, LocalStorageManager);\n});\n","Function.prototype.bind = Function.prototype.bind || function (target) {\n  var self = this;\n  return function (args) {\n    if (!(args instanceof Array)) {\n      args = [args];\n    }\n    self.apply(target, args);\n  };\n};\n","(function () {\n  if (typeof window.Element === \"undefined\" ||\n      \"classList\" in document.documentElement) {\n    return;\n  }\n\n  var prototype = Array.prototype,\n      push = prototype.push,\n      splice = prototype.splice,\n      join = prototype.join;\n\n  function DOMTokenList(el) {\n    this.el = el;\n    // The className needs to be trimmed and split on whitespace\n    // to retrieve a list of classes.\n    var classes = el.className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n    for (var i = 0; i < classes.length; i++) {\n      push.call(this, classes[i]);\n    }\n  }\n\n  DOMTokenList.prototype = {\n    add: function (token) {\n      if (this.contains(token)) return;\n      push.call(this, token);\n      this.el.className = this.toString();\n    },\n    contains: function (token) {\n      return this.el.className.indexOf(token) != -1;\n    },\n    item: function (index) {\n      return this[index] || null;\n    },\n    remove: function (token) {\n      if (!this.contains(token)) return;\n      for (var i = 0; i < this.length; i++) {\n        if (this[i] == token) break;\n      }\n      splice.call(this, i, 1);\n      this.el.className = this.toString();\n    },\n    toString: function () {\n      return join.call(this, ' ');\n    },\n    toggle: function (token) {\n      if (!this.contains(token)) {\n        this.add(token);\n      } else {\n        this.remove(token);\n      }\n\n      return this.contains(token);\n    }\n  };\n\n  window.DOMTokenList = DOMTokenList;\n\n  function defineElementGetter(obj, prop, getter) {\n    if (Object.defineProperty) {\n      Object.defineProperty(obj, prop, {\n        get: getter\n      });\n    } else {\n      obj.__defineGetter__(prop, getter);\n    }\n  }\n\n  defineElementGetter(HTMLElement.prototype, 'classList', function () {\n    return new DOMTokenList(this);\n  });\n})();\n","function GameManager(size, InputManager, Actuator, StorageManager) {\n  this.size           = size; // Size of the grid\n  this.inputManager   = new InputManager;\n  this.storageManager = new StorageManager;\n  this.actuator       = new Actuator;\n\n  this.startTiles     = 2;\n\n  this.inputManager.on(\"move\", this.move.bind(this));\n  this.inputManager.on(\"restart\", this.restart.bind(this));\n  this.inputManager.on(\"keepPlaying\", this.keepPlaying.bind(this));\n\n  this.setup();\n}\n\n// Restart the game\nGameManager.prototype.restart = function () {\n  this.storageManager.clearGameState();\n  this.actuator.continueGame(); // Clear the game won/lost message\n  this.setup();\n};\n\n// Keep playing after winning (allows going over 2048)\nGameManager.prototype.keepPlaying = function () {\n  this.keepPlaying = true;\n  this.actuator.continueGame(); // Clear the game won/lost message\n};\n\n// Return true if the game is lost, or has won and the user hasn't kept playing\nGameManager.prototype.isGameTerminated = function () {\n  return this.over || (this.won && !this.keepPlaying);\n};\n\n// Set up the game\nGameManager.prototype.setup = function () {\n  var previousState = this.storageManager.getGameState();\n\n  // Reload the game from a previous game if present\n  if (previousState) {\n    this.grid        = new Grid(previousState.grid.size,\n                                previousState.grid.cells); // Reload grid\n    this.score       = previousState.score;\n    this.over        = previousState.over;\n    this.won         = previousState.won;\n    this.keepPlaying = previousState.keepPlaying;\n  } else {\n    this.grid        = new Grid(this.size);\n    this.score       = 0;\n    this.over        = false;\n    this.won         = false;\n    this.keepPlaying = false;\n\n    // Add the initial tiles\n    this.addStartTiles();\n  }\n\n  // Update the actuator\n  this.actuate();\n};\n\n// Set up the initial tiles to start the game with\nGameManager.prototype.addStartTiles = function () {\n  for (var i = 0; i < this.startTiles; i++) {\n    this.addRandomTile();\n  }\n};\n\n// Adds a tile in a random position\nGameManager.prototype.addRandomTile = function () {\n  if (this.grid.cellsAvailable()) {\n    var value = Math.random() < 0.9 ? 2 : 4;\n    var tile = new Tile(this.grid.randomAvailableCell(), value);\n\n    this.grid.insertTile(tile);\n  }\n};\n\n// Sends the updated grid to the actuator\nGameManager.prototype.actuate = function () {\n  if (this.storageManager.getBestScore() < this.score) {\n    this.storageManager.setBestScore(this.score);\n  }\n\n  // Clear the state when the game is over (game over only, not win)\n  if (this.over) {\n    this.storageManager.clearGameState();\n  } else {\n    this.storageManager.setGameState(this.serialize());\n  }\n\n  this.actuator.actuate(this.grid, {\n    score:      this.score,\n    over:       this.over,\n    won:        this.won,\n    bestScore:  this.storageManager.getBestScore(),\n    terminated: this.isGameTerminated()\n  });\n\n};\n\n// Represent the current game as an object\nGameManager.prototype.serialize = function () {\n  return {\n    grid:        this.grid.serialize(),\n    score:       this.score,\n    over:        this.over,\n    won:         this.won,\n    keepPlaying: this.keepPlaying\n  };\n};\n\n// Save all tile positions and remove merger info\nGameManager.prototype.prepareTiles = function () {\n  this.grid.eachCell(function (x, y, tile) {\n    if (tile) {\n      tile.mergedFrom = null;\n      tile.savePosition();\n    }\n  });\n};\n\n// Move a tile and its representation\nGameManager.prototype.moveTile = function (tile, cell) {\n  this.grid.cells[tile.x][tile.y] = null;\n  this.grid.cells[cell.x][cell.y] = tile;\n  tile.updatePosition(cell);\n};\n\n// Move tiles on the grid in the specified direction\nGameManager.prototype.move = function (direction) {\n  // 0: up, 1: right, 2: down, 3: left\n  var self = this;\n\n  if (this.isGameTerminated()) return; // Don't do anything if the game's over\n\n  var cell, tile;\n\n  var vector     = this.getVector(direction);\n  var traversals = this.buildTraversals(vector);\n  var moved      = false;\n\n  // Save the current tile positions and remove merger information\n  this.prepareTiles();\n\n  // Traverse the grid in the right direction and move tiles\n  traversals.x.forEach(function (x) {\n    traversals.y.forEach(function (y) {\n      cell = { x: x, y: y };\n      tile = self.grid.cellContent(cell);\n\n      if (tile) {\n        var positions = self.findFarthestPosition(cell, vector);\n        var next      = self.grid.cellContent(positions.next);\n\n        // Only one merger per row traversal?\n        if (next && next.value === tile.value && !next.mergedFrom) {\n          var merged = new Tile(positions.next, tile.value * 2);\n          merged.mergedFrom = [tile, next];\n\n          self.grid.insertTile(merged);\n          self.grid.removeTile(tile);\n\n          // Converge the two tiles' positions\n          tile.updatePosition(positions.next);\n\n          // Update the score\n          self.score += merged.value;\n\n          // The mighty 2048 tile\n          if (merged.value === 2048) self.won = true;\n        } else {\n          self.moveTile(tile, positions.farthest);\n        }\n\n        if (!self.positionsEqual(cell, tile)) {\n          moved = true; // The tile moved from its original cell!\n        }\n      }\n    });\n  });\n\n  if (moved) {\n    this.addRandomTile();\n\n    if (!this.movesAvailable()) {\n      this.over = true; // Game over!\n    }\n\n    this.actuate();\n  }\n};\n\n// Get the vector representing the chosen direction\nGameManager.prototype.getVector = function (direction) {\n  // Vectors representing tile movement\n  var map = {\n    0: { x: 0,  y: -1 }, // Up\n    1: { x: 1,  y: 0 },  // Right\n    2: { x: 0,  y: 1 },  // Down\n    3: { x: -1, y: 0 }   // Left\n  };\n\n  return map[direction];\n};\n\n// Build a list of positions to traverse in the right order\nGameManager.prototype.buildTraversals = function (vector) {\n  var traversals = { x: [], y: [] };\n\n  for (var pos = 0; pos < this.size; pos++) {\n    traversals.x.push(pos);\n    traversals.y.push(pos);\n  }\n\n  // Always traverse from the farthest cell in the chosen direction\n  if (vector.x === 1) traversals.x = traversals.x.reverse();\n  if (vector.y === 1) traversals.y = traversals.y.reverse();\n\n  return traversals;\n};\n\nGameManager.prototype.findFarthestPosition = function (cell, vector) {\n  var previous;\n\n  // Progress towards the vector direction until an obstacle is found\n  do {\n    previous = cell;\n    cell     = { x: previous.x + vector.x, y: previous.y + vector.y };\n  } while (this.grid.withinBounds(cell) &&\n           this.grid.cellAvailable(cell));\n\n  return {\n    farthest: previous,\n    next: cell // Used to check if a merge is required\n  };\n};\n\nGameManager.prototype.movesAvailable = function () {\n  return this.grid.cellsAvailable() || this.tileMatchesAvailable();\n};\n\n// Check for available matches between tiles (more expensive check)\nGameManager.prototype.tileMatchesAvailable = function () {\n  var self = this;\n\n  var tile;\n\n  for (var x = 0; x < this.size; x++) {\n    for (var y = 0; y < this.size; y++) {\n      tile = this.grid.cellContent({ x: x, y: y });\n\n      if (tile) {\n        for (var direction = 0; direction < 4; direction++) {\n          var vector = self.getVector(direction);\n          var cell   = { x: x + vector.x, y: y + vector.y };\n\n          var other  = self.grid.cellContent(cell);\n\n          if (other && other.value === tile.value) {\n            return true; // These two tiles can be merged\n          }\n        }\n      }\n    }\n  }\n\n  return false;\n};\n\nGameManager.prototype.positionsEqual = function (first, second) {\n  return first.x === second.x && first.y === second.y;\n};\n","function Grid(size, previousState) {\n  this.size = size;\n  this.cells = previousState ? this.fromState(previousState) : this.empty();\n}\n\n// Build a grid of the specified size\nGrid.prototype.empty = function () {\n  var cells = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cells[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      row.push(null);\n    }\n  }\n\n  return cells;\n};\n\nGrid.prototype.fromState = function (state) {\n  var cells = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cells[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      var tile = state[x][y];\n      row.push(tile ? new Tile(tile.position, tile.value) : null);\n    }\n  }\n\n  return cells;\n};\n\n// Find the first available random position\nGrid.prototype.randomAvailableCell = function () {\n  var cells = this.availableCells();\n\n  if (cells.length) {\n    return cells[Math.floor(Math.random() * cells.length)];\n  }\n};\n\nGrid.prototype.availableCells = function () {\n  var cells = [];\n\n  this.eachCell(function (x, y, tile) {\n    if (!tile) {\n      cells.push({ x: x, y: y });\n    }\n  });\n\n  return cells;\n};\n\n// Call callback for every cell\nGrid.prototype.eachCell = function (callback) {\n  for (var x = 0; x < this.size; x++) {\n    for (var y = 0; y < this.size; y++) {\n      callback(x, y, this.cells[x][y]);\n    }\n  }\n};\n\n// Check if there are any cells available\nGrid.prototype.cellsAvailable = function () {\n  return !!this.availableCells().length;\n};\n\n// Check if the specified cell is taken\nGrid.prototype.cellAvailable = function (cell) {\n  return !this.cellOccupied(cell);\n};\n\nGrid.prototype.cellOccupied = function (cell) {\n  return !!this.cellContent(cell);\n};\n\nGrid.prototype.cellContent = function (cell) {\n  if (this.withinBounds(cell)) {\n    return this.cells[cell.x][cell.y];\n  } else {\n    return null;\n  }\n};\n\n// Inserts a tile at its position\nGrid.prototype.insertTile = function (tile) {\n  this.cells[tile.x][tile.y] = tile;\n};\n\nGrid.prototype.removeTile = function (tile) {\n  this.cells[tile.x][tile.y] = null;\n};\n\nGrid.prototype.withinBounds = function (position) {\n  return position.x >= 0 && position.x < this.size &&\n         position.y >= 0 && position.y < this.size;\n};\n\nGrid.prototype.serialize = function () {\n  var cellState = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cellState[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      row.push(this.cells[x][y] ? this.cells[x][y].serialize() : null);\n    }\n  }\n\n  return {\n    size: this.size,\n    cells: cellState\n  };\n};\n","function HTMLActuator() {\n  this.tileContainer    = document.querySelector(\".tile-container\");\n  this.scoreContainer   = document.querySelector(\".score-container\");\n  this.bestContainer    = document.querySelector(\".best-container\");\n  this.messageContainer = document.querySelector(\".game-message\");\n\n  this.score = 0;\n}\n\nHTMLActuator.prototype.actuate = function (grid, metadata) {\n  var self = this;\n\n  window.requestAnimationFrame(function () {\n    self.clearContainer(self.tileContainer);\n\n    grid.cells.forEach(function (column) {\n      column.forEach(function (cell) {\n        if (cell) {\n          self.addTile(cell);\n        }\n      });\n    });\n\n    self.updateScore(metadata.score);\n    self.updateBestScore(metadata.bestScore);\n\n    if (metadata.terminated) {\n      if (metadata.over) {\n        self.message(false); // You lose\n      } else if (metadata.won) {\n        self.message(true); // You win!\n      }\n    }\n\n  });\n};\n\n// Continues the game (both restart and keep playing)\nHTMLActuator.prototype.continueGame = function () {\n  this.clearMessage();\n};\n\nHTMLActuator.prototype.clearContainer = function (container) {\n  while (container.firstChild) {\n    container.removeChild(container.firstChild);\n  }\n};\n\nHTMLActuator.prototype.addTile = function (tile) {\n  var self = this;\n\n  var wrapper   = document.createElement(\"div\");\n  var inner     = document.createElement(\"div\");\n  var position  = tile.previousPosition || { x: tile.x, y: tile.y };\n  var positionClass = this.positionClass(position);\n\n  // We can't use classlist because it somehow glitches when replacing classes\n  var classes = [\"tile\", \"tile-\" + tile.value, positionClass];\n\n  if (tile.value > 2048) classes.push(\"tile-super\");\n\n  this.applyClasses(wrapper, classes);\n\n  inner.classList.add(\"tile-inner\");\n  inner.textContent = tile.value;\n\n  if (tile.previousPosition) {\n    // Make sure that the tile gets rendered in the previous position first\n    window.requestAnimationFrame(function () {\n      classes[2] = self.positionClass({ x: tile.x, y: tile.y });\n      self.applyClasses(wrapper, classes); // Update the position\n    });\n  } else if (tile.mergedFrom) {\n    classes.push(\"tile-merged\");\n    this.applyClasses(wrapper, classes);\n\n    // Render the tiles that merged\n    tile.mergedFrom.forEach(function (merged) {\n      self.addTile(merged);\n    });\n  } else {\n    classes.push(\"tile-new\");\n    this.applyClasses(wrapper, classes);\n  }\n\n  // Add the inner part of the tile to the wrapper\n  wrapper.appendChild(inner);\n\n  // Put the tile on the board\n  this.tileContainer.appendChild(wrapper);\n};\n\nHTMLActuator.prototype.applyClasses = function (element, classes) {\n  element.setAttribute(\"class\", classes.join(\" \"));\n};\n\nHTMLActuator.prototype.normalizePosition = function (position) {\n  return { x: position.x + 1, y: position.y + 1 };\n};\n\nHTMLActuator.prototype.positionClass = function (position) {\n  position = this.normalizePosition(position);\n  return \"tile-position-\" + position.x + \"-\" + position.y;\n};\n\nHTMLActuator.prototype.updateScore = function (score) {\n  this.clearContainer(this.scoreContainer);\n\n  var difference = score - this.score;\n  this.score = score;\n\n  this.scoreContainer.textContent = this.score;\n\n  if (difference > 0) {\n    var addition = document.createElement(\"div\");\n    addition.classList.add(\"score-addition\");\n    addition.textContent = \"+\" + difference;\n\n    this.scoreContainer.appendChild(addition);\n  }\n};\n\nHTMLActuator.prototype.updateBestScore = function (bestScore) {\n  this.bestContainer.textContent = bestScore;\n};\n\nHTMLActuator.prototype.message = function (won) {\n  var type    = won ? \"game-won\" : \"game-over\";\n  var message = won ? \"You win!\" : \"Game over!\";\n\n  this.messageContainer.classList.add(type);\n  this.messageContainer.getElementsByTagName(\"p\")[0].textContent = message;\n};\n\nHTMLActuator.prototype.clearMessage = function () {\n  // IE only takes one value to remove at a time.\n  this.messageContainer.classList.remove(\"game-won\");\n  this.messageContainer.classList.remove(\"game-over\");\n};\n","// Import CSS\nimport './main.css';\n\n// Import all game modules in the correct order\nimport './bind_polyfill.js';\nimport './classlist_polyfill.js';\nimport './animframe_polyfill.js';\nimport './keyboard_input_manager.js';\nimport './html_actuator.js';\nimport './grid.js';\nimport './tile.js';\nimport './local_storage_manager.js';\nimport './game_manager.js';\nimport './application.js';\n\n// Register service worker for PWA support\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/service-worker.js')\n      .then(registration => {\n        console.log('SW registered: ', registration);\n      })\n      .catch(registrationError => {\n        console.log('SW registration failed: ', registrationError);\n      });\n  });\n}\n\n// Add enhanced keyboard controls\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Detect if user is on desktop\n  const isDesktop = window.matchMedia('(min-width: 768px)').matches;\n  \n  if (isDesktop) {\n    // Show desktop hints\n    const hints = document.querySelectorAll('.desktop-hint');\n    hints.forEach(hint => hint.style.display = 'inline');\n  }\n});\n\nconsole.log('2048 Game loaded successfully!');\n","function KeyboardInputManager() {\n  this.events = {};\n\n  if (window.navigator.msPointerEnabled) {\n    //Internet Explorer 10 style\n    this.eventTouchstart    = \"MSPointerDown\";\n    this.eventTouchmove     = \"MSPointerMove\";\n    this.eventTouchend      = \"MSPointerUp\";\n  } else {\n    this.eventTouchstart    = \"touchstart\";\n    this.eventTouchmove     = \"touchmove\";\n    this.eventTouchend      = \"touchend\";\n  }\n\n  this.listen();\n}\n\nKeyboardInputManager.prototype.on = function (event, callback) {\n  if (!this.events[event]) {\n    this.events[event] = [];\n  }\n  this.events[event].push(callback);\n};\n\nKeyboardInputManager.prototype.emit = function (event, data) {\n  var callbacks = this.events[event];\n  if (callbacks) {\n    callbacks.forEach(function (callback) {\n      callback(data);\n    });\n  }\n};\n\nKeyboardInputManager.prototype.listen = function () {\n  var self = this;\n\n  var map = {\n    38: 0, // Up\n    39: 1, // Right\n    40: 2, // Down\n    37: 3, // Left\n    75: 0, // Vim up\n    76: 1, // Vim right\n    74: 2, // Vim down\n    72: 3, // Vim left\n    87: 0, // W\n    68: 1, // D\n    83: 2, // S\n    65: 3  // A\n  };\n\n  // Respond to direction keys\n  document.addEventListener(\"keydown\", function (event) {\n    var modifiers = event.altKey || event.ctrlKey || event.metaKey ||\n                    event.shiftKey;\n    var mapped    = map[event.which];\n\n    if (!modifiers) {\n      if (mapped !== undefined) {\n        event.preventDefault();\n        self.emit(\"move\", mapped);\n      }\n    }\n\n    // R key restarts the game\n    if (!modifiers && event.which === 82) {\n      self.restart.call(self, event);\n    }\n\n    // N key for new game\n    if (!modifiers && event.which === 78) {\n      self.restart.call(self, event);\n    }\n\n    // ESC key to close modals\n    if (!modifiers && event.which === 27) {\n      self.keepPlaying.call(self, event);\n    }\n  });\n\n  // Respond to button presses\n  this.bindButtonPress(\".retry-button\", this.restart);\n  this.bindButtonPress(\".restart-button\", this.restart);\n  this.bindButtonPress(\".keep-playing-button\", this.keepPlaying);\n\n  // Respond to swipe events\n  var touchStartClientX, touchStartClientY;\n  var gameContainer = document.getElementsByClassName(\"game-container\")[0];\n\n  gameContainer.addEventListener(this.eventTouchstart, function (event) {\n    if ((!window.navigator.msPointerEnabled && event.touches.length > 1) ||\n        event.targetTouches.length > 1) {\n      return; // Ignore if touching with more than 1 finger\n    }\n\n    if (window.navigator.msPointerEnabled) {\n      touchStartClientX = event.pageX;\n      touchStartClientY = event.pageY;\n    } else {\n      touchStartClientX = event.touches[0].clientX;\n      touchStartClientY = event.touches[0].clientY;\n    }\n\n    event.preventDefault();\n  });\n\n  gameContainer.addEventListener(this.eventTouchmove, function (event) {\n    event.preventDefault();\n  });\n\n  gameContainer.addEventListener(this.eventTouchend, function (event) {\n    if ((!window.navigator.msPointerEnabled && event.touches.length > 0) ||\n        event.targetTouches.length > 0) {\n      return; // Ignore if still touching with one or more fingers\n    }\n\n    var touchEndClientX, touchEndClientY;\n\n    if (window.navigator.msPointerEnabled) {\n      touchEndClientX = event.pageX;\n      touchEndClientY = event.pageY;\n    } else {\n      touchEndClientX = event.changedTouches[0].clientX;\n      touchEndClientY = event.changedTouches[0].clientY;\n    }\n\n    var dx = touchEndClientX - touchStartClientX;\n    var absDx = Math.abs(dx);\n\n    var dy = touchEndClientY - touchStartClientY;\n    var absDy = Math.abs(dy);\n\n    if (Math.max(absDx, absDy) > 10) {\n      // (right : left) : (down : up)\n      self.emit(\"move\", absDx > absDy ? (dx > 0 ? 1 : 3) : (dy > 0 ? 2 : 0));\n    }\n  });\n};\n\nKeyboardInputManager.prototype.restart = function (event) {\n  event.preventDefault();\n  this.emit(\"restart\");\n};\n\nKeyboardInputManager.prototype.keepPlaying = function (event) {\n  event.preventDefault();\n  this.emit(\"keepPlaying\");\n};\n\nKeyboardInputManager.prototype.bindButtonPress = function (selector, fn) {\n  var button = document.querySelector(selector);\n  button.addEventListener(\"click\", fn.bind(this));\n  button.addEventListener(this.eventTouchend, fn.bind(this));\n};\n","window.fakeStorage = {\n  _data: {},\n\n  setItem: function (id, val) {\n    return this._data[id] = String(val);\n  },\n\n  getItem: function (id) {\n    return this._data.hasOwnProperty(id) ? this._data[id] : undefined;\n  },\n\n  removeItem: function (id) {\n    return delete this._data[id];\n  },\n\n  clear: function () {\n    return this._data = {};\n  }\n};\n\nfunction LocalStorageManager() {\n  this.bestScoreKey     = \"bestScore\";\n  this.gameStateKey     = \"gameState\";\n\n  var supported = this.localStorageSupported();\n  this.storage = supported ? window.localStorage : window.fakeStorage;\n}\n\nLocalStorageManager.prototype.localStorageSupported = function () {\n  var testKey = \"test\";\n\n  try {\n    var storage = window.localStorage;\n    storage.setItem(testKey, \"1\");\n    storage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\n// Best score getters/setters\nLocalStorageManager.prototype.getBestScore = function () {\n  return this.storage.getItem(this.bestScoreKey) || 0;\n};\n\nLocalStorageManager.prototype.setBestScore = function (score) {\n  this.storage.setItem(this.bestScoreKey, score);\n};\n\n// Game state getters/setters and clearing\nLocalStorageManager.prototype.getGameState = function () {\n  var stateJSON = this.storage.getItem(this.gameStateKey);\n  return stateJSON ? JSON.parse(stateJSON) : null;\n};\n\nLocalStorageManager.prototype.setGameState = function (gameState) {\n  this.storage.setItem(this.gameStateKey, JSON.stringify(gameState));\n};\n\nLocalStorageManager.prototype.clearGameState = function () {\n  this.storage.removeItem(this.gameStateKey);\n};\n","function Tile(position, value) {\n  this.x                = position.x;\n  this.y                = position.y;\n  this.value            = value || 2;\n\n  this.previousPosition = null;\n  this.mergedFrom       = null; // Tracks tiles that merged together\n}\n\nTile.prototype.savePosition = function () {\n  this.previousPosition = { x: this.x, y: this.y };\n};\n\nTile.prototype.updatePosition = function (position) {\n  this.x = position.x;\n  this.y = position.y;\n};\n\nTile.prototype.serialize = function () {\n  return {\n    position: {\n      x: this.x,\n      y: this.y\n    },\n    value: this.value\n  };\n};\n"],"names":["lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","GameManager","KeyboardInputManager","HTMLActuator","LocalStorageManager","Function","prototype","bind","target","self","this","args","Array","apply","Element","document","documentElement","obj","prop","getter","push","splice","join","DOMTokenList","add","token","contains","call","el","className","toString","indexOf","item","index","remove","i","toggle","HTMLElement","Object","defineProperty","get","__defineGetter__","classes","replace","split","size","InputManager","Actuator","StorageManager","inputManager","storageManager","actuator","startTiles","on","move","restart","keepPlaying","setup","clearGameState","continueGame","isGameTerminated","over","won","previousState","getGameState","grid","Grid","cells","score","addStartTiles","actuate","addRandomTile","cellsAvailable","value","random","tile","Tile","randomAvailableCell","insertTile","getBestScore","setBestScore","setGameState","serialize","bestScore","terminated","prepareTiles","eachCell","y","mergedFrom","savePosition","moveTile","cell","updatePosition","direction","vector","getVector","traversals","buildTraversals","moved","forEach","cellContent","positions","findFarthestPosition","next","merged","removeTile","farthest","positionsEqual","movesAvailable","pos","reverse","previous","withinBounds","cellAvailable","tileMatchesAvailable","other","first","second","fromState","empty","row","state","position","availableCells","floor","cellOccupied","cellState","tileContainer","querySelector","scoreContainer","bestContainer","messageContainer","metadata","clearContainer","column","addTile","updateScore","updateBestScore","message","clearMessage","container","firstChild","removeChild","wrapper","createElement","inner","previousPosition","positionClass","applyClasses","classList","textContent","appendChild","element","setAttribute","normalizePosition","difference","addition","type","getElementsByTagName","navigator","addEventListener","serviceWorker","register","then","registration","console","log","registrationError","matchMedia","matches","querySelectorAll","hint","style","display","events","msPointerEnabled","eventTouchstart","eventTouchmove","eventTouchend","listen","event","emit","data","callbacks","touchStartClientX","touchStartClientY","map","modifiers","altKey","ctrlKey","metaKey","shiftKey","mapped","which","undefined","preventDefault","bindButtonPress","gameContainer","getElementsByClassName","touches","targetTouches","pageX","pageY","clientX","clientY","touchEndClientX","touchEndClientY","changedTouches","dx","absDx","abs","dy","absDy","selector","fn","button","bestScoreKey","gameStateKey","supported","localStorageSupported","storage","localStorage","fakeStorage","_data","setItem","val","String","getItem","hasOwnProperty","removeItem","clear","testKey","error","stateJSON","JSON","parse","gameState","stringify"],"sourceRoot":""}